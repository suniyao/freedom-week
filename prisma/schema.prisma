model User {
  id                  String        @id @unique @default(cuid())
  username            String        @unique @db.VarChar(64)
  email               String        @unique @db.VarChar(64)
  password            String        @unique //hashed
  profile_picture_url String?
  bio                 String?
  stats               UserStats?
  settings            UserSettings?
}

model UserStats {
  user_id  String    @id
  user     User      @relation(fields: [user_id], references: [id])
  sessions Session[]
}

model UserSettings {
  user_id String @id
  user    User   @relation(fields: [user_id], references: [id])
}

model Session {
  id                       String         @id @unique @default(cuid())
  owner                    UserStats      @relation(fields: [owner_id], references: [user_id])
  owner_id                 String
  questions                QuestionData[]
  ranked                   Boolean
  total_milliseconds_spent Int
}

model QuestionData {
  id                 String  @id @unique @default(cuid())
  session            Session @relation(fields: [session_id], references: [id])
  session_id         String
  type               String
  milliseconds_spent Int
  correct            Boolean
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}
